<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="../assets/CSS/main.css">
    <link rel="stylesheet" href="../assets/CSS/login.css">
</head>

<body>
    <div class="login-form">
        <img src="../img/social-story-kid.png" alt="Web App Logo" class="logo">
        <h3>Create a New Account</h3>
        <form onsubmit="return false;" class="login">
            <label for="email-id">Email</label><br>
            <input type="email" name="email" id="email-id"><br>

            <label for="pwd">Password</label><br>
            <input type="password" name="pwd" id="pwd"><br>

            <label for="confirm-pwd">Confirm Password</label><br>
            <input type="password" name="confirm-pwd" id="confirm-pwd"><br>

            <button type="button" id="signup-button">Sign Up</button>
        </form>
    </div>

    <script src="../assets/JS/login.js"></script>

    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <!-- Firebase Authentication -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

    <script>
        // Firebase initialization
        const firebaseConfig = {
            apiKey: "AIzaSyDtnGccSZ0-tFgPVwD9jmJBJ4PpkDQD7Bs",
            authDomain: "social-stories-generator.firebaseapp.com",
            projectId: "social-stories-generator",
            storageBucket: "social-stories-generator.appspot.com",
            messagingSenderId: "754080654068",
            appId: "1:754080654068:web:5651ac2eea8687d948b4a1",
            measurementId: "G-4ML4PRDBMB"
        };

        firebase.initializeApp(firebaseConfig);

        // Sign-up function
        function signup() {
            var email = document.getElementById("email-id").value;
            var password = document.getElementById("pwd").value;
            var confirmPassword = document.getElementById("confirm-pwd").value;

            if (password !== confirmPassword) {
                alert("Passwords do not match!");
                return;
            }

            firebase.auth().createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Successfully signed up, redirect to login or home page
                    alert("Sign up successful! Redirecting to login page.");
                    window.location.href = "login.html";
                })
                .catch((error) => {
                    var errorMessage = error.message;
                    alert("Error: " + errorMessage);
                });
        }

        // Add event listener to the signup button
        document.getElementById("signup-button").addEventListener("click", signup);
    </script>
</body>

</html>